var e=Object.defineProperty,a=Object.prototype.hasOwnProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,o=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,n=(e,n)=>{for(var r in n||(n={}))a.call(n,r)&&o(e,r,n[r]);if(t)for(var r of t(n))s.call(n,r)&&o(e,r,n[r]);return e};import{_ as r}from"./preload-helper.53a7bf77.js";import{r as c,c as i,i as p,u as l,a as g,w as u,d as j,p as f,o as b,b as h,e as m,f as d,g as P,t as D,h as y,j as v,k as w,l as O}from"./json.worker.c27b3646.js";import{v as S}from"./visual.config.23bbb2ae.js";const k="jsonData",$=Symbol("injectKey"),_=()=>p($);var E=j({name:"App",setup(){const e=(()=>{var e;const a=JSON.parse(sessionStorage.getItem("jsonData"))||{container:{width:360,height:960},pages:{"/":{title:"首页",path:"/",blocks:[]}}},t=l();console.log("jsonData：",a);const s=e=>e.startsWith("/")?e:`/${e}`,o=g({jsonData:a,currentPage:null!=(e=a.pages[t.path])?e:a.pages["/"]});u((()=>t.path),(e=>p(e)));const r=(e="",a="")=>{delete o.jsonData.pages[e],a&&p(a)},p=(e="/")=>{o.currentPage=a.pages[e]};return{visualConfig:S,jsonData:c(o.jsonData),currentPage:i((()=>o.currentPage)),overrideProject:e=>{o.jsonData="string"==typeof e?JSON.parse(e):e},setCurrentPage:p,updatePage:({newPath:e,oldPath:a,page:t})=>{console.log(o.jsonData.pages[a],t),e&&e!=a?(t.path=e,o.jsonData.pages[s(e)]=n(n({},o.jsonData.pages[a]),t),r(a,s(e))):Object.assign(o.jsonData.pages[a],t)},incrementPage:(e="",a)=>{o.jsonData.pages[s(e)]=null!=a?a:{title:"新页面",path:e,blocks:[]}},deletePage:r,updatePageBlock:(e="",a=[])=>{o.jsonData.pages[e].blocks=a}}})();f($,e);const{jsonData:a}=e;window.addEventListener("beforeunload",(()=>{sessionStorage.setItem("jsonData",JSON.stringify(a))}))}});E.render=function(e,a,t,s,o,n){const r=m("router-view");return b(),h(r,null,{default:d((({Component:e,route:a})=>[(b(),h(P(e),{key:a.path}))])),_:1})};D.configure({showSpinner:!1});const I=[{path:"/:pathMatch(.*)*",component:()=>r((()=>__import__("./index.060bd710.js").then((function(e){return e.i}))),["/vite-vue3-lowcode/assets/index.060bd710.js","/vite-vue3-lowcode/assets/index.435373ba.css","/vite-vue3-lowcode/assets/json.worker.c27b3646.js","/vite-vue3-lowcode/assets/visual.config.23bbb2ae.js","/vite-vue3-lowcode/assets/visual.config.947336ba.css"])}],C=y({history:v(),routes:I});C.beforeEach((()=>(D.start(),!0))),C.afterEach((()=>{D.done()}));const J={count:0};var N=w({state:()=>J,mutations:{increment(e){e.count++}},actions:{increment(e){e.commit("increment")}},getters:{double:e=>2*e.count}});const x=O(E);x.config.globalProperties.$$refs={},window.$$refs=x.config.globalProperties.$$refs,x.use(C).use(N),C.isReady().then((()=>x.mount("#app")));export{k as l,_ as u};
