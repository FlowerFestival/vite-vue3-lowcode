var e=Object.defineProperty,n=Object.prototype.hasOwnProperty,r=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,t=(n,r,o)=>r in n?e(n,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[r]=o,a=(e,a)=>{for(var l in a||(a={}))n.call(a,l)&&t(e,l,a[l]);if(r)for(var l of r(a))o.call(a,l)&&t(e,l,a[l]);return e};import{v as l}from"./visual.config.38103309.js";import{d as s,e as p,o as c,b as m,q as i,dq as u,dg as f,f as d,y as g,dr as v,a as y,Y as b}from"./json.worker.a47d5c75.js";import{r as j}from"./preview.f6a302fc.js";import"./preload-helper.53a7bf77.js";var O={name:"SlotItem",components:{CompRender:s({name:"CompRender",props:{element:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})}},setup:e=>()=>e.config.componentMap[e.element.componentKey].render({size:{},props:e.element.props||{},model:{},block:e.element,custom:{}})})},props:{element:{type:[Object,Array],default:()=>({})},config:{type:Object,default:()=>({})}}};O.render=function(e,n,r,o,t,a){var l;const s=p("slot-item",!0),v=p("comp-render");return c(),m("div",null,[i(v,{element:r.element,config:r.config},u({_:2},[f(null==(l=r.element.props)?void 0:l.slots,((e,n)=>({name:n,fn:d((()=>[(c(!0),m(g,null,f(null==e?void 0:e.children,(e=>(c(),m(s,{key:e._vid,element:e,config:r.config},null,8,["element","config"])))),128))]))})))]),1032,["element","config"])])};var k=s({name:"Preview",components:{SlotItem:O},setup(){var e;const n=JSON.parse(localStorage.getItem("jsonData"));n&&Object.keys(n.pages)||v.fail("当前没有可以预览的页面！");const r=j.currentRoute,o=y({currentPage:null==(e=n.pages[r.value.path])?void 0:e.blocks});o.currentPage||j.replace("/");const t=e=>{if(Array.isArray(e))return e.map((e=>t(e)));return l.componentMap[e.componentKey].render({size:{},props:e.props||{},block:e,model:{},custom:{}})};return a(a({},b(o)),{visualConfig:l,renderCom:t})}});k.render=function(e,n,r,o,t,a){const l=p("slot-item");return c(!0),m(g,null,f(e.currentPage,(n=>(c(),m(l,{key:n._vid,element:n,config:e.visualConfig},null,8,["element","config"])))),128)};export default k;
