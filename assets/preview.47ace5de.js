var e=Object.defineProperty,n=Object.prototype.hasOwnProperty,t=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,o=(n,t,r)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,a=(e,a)=>{for(var l in a||(a={}))n.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&o(e,l,a[l]);return e};import{v as l}from"./visual.config.7f3b225a.js";import{d as s,g as c,o as p,c as m,a as i,aj as u,J as f,w as d,F as g,aY as v,r as y,t as b}from"./json.worker.7f87eed9.js";import{r as j}from"./preview.d91ca301.js";import"./index.124f267a.js";var O={name:"SlotItem",components:{CompRender:s({name:"CompRender",props:{element:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})}},setup:e=>()=>e.config.componentMap[e.element.componentKey].render({size:{},props:e.element.props||{},model:{},block:e.element,custom:{}})})},props:{element:{type:[Object,Array],default:()=>({})},config:{type:Object,default:()=>({})}}};O.render=function(e,n,t,r,o,a){var l;const s=c("slot-item",!0),v=c("comp-render");return p(),m("div",null,[i(v,{element:t.element,config:t.config},u({_:2},[f(null==(l=t.element.props)?void 0:l.slots,((e,n)=>({name:n,fn:d((()=>[(p(!0),m(g,null,f(null==e?void 0:e.children,(e=>(p(),m(s,{key:e._vid,element:e,config:t.config},null,8,["element","config"])))),128))]))})))]),1032,["element","config"])])};var k=s({name:"Preview",components:{SlotItem:O},setup(){var e;const n=JSON.parse(localStorage.getItem("jsonData"));n&&Object.keys(n.pages)||v.fail("当前没有可以预览的页面！");const t=j.currentRoute,r=y({currentPage:null==(e=n.pages[t.value.path])?void 0:e.blocks});r.currentPage||j.replace("/");const o=e=>{if(Array.isArray(e))return e.map((e=>o(e)));return l.componentMap[e.componentKey].render({size:{},props:e.props||{},block:e,model:{},custom:{}})};return a(a({},b(r)),{visualConfig:l,renderCom:o})}});k.render=function(e,n,t,r,o,a){const l=c("slot-item");return p(!0),m(g,null,f(e.currentPage,(n=>(p(),m(l,{key:n._vid,element:n,config:e.visualConfig},null,8,["element","config"])))),128)};export default k;
