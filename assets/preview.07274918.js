var e=Object.defineProperty,r=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(r,t,n)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n;import{v as s}from"./visual.config.2bfcd55d.js";import{d as p,e as c,o as i,b as m,n as f,d5 as u,cX as d,f as g,x as b,d6 as v,a as y,X as j}from"./json.worker.e4ffb47a.js";import{r as O}from"./preview.2eadf850.js";import"./preload-helper.53a7bf77.js";var P={name:"SlotItem",components:{CompRender:p({name:"CompRender",props:{element:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})}},setup:e=>()=>e.config.componentMap[e.element.componentKey].render({size:{},props:e.element.props||{},model:{},block:e.element,custom:{}})})},props:{element:{type:[Object,Array],default:()=>({})},config:{type:Object,default:()=>({})}}};P.render=function(e,r,t,n,o,a){var l;const s=c("slot-item",!0),p=c("comp-render");return i(),m("div",null,[f(p,{element:t.element,config:t.config},u({_:2},[d(null==(l=t.element.props)?void 0:l.slots,((e,r)=>({name:r,fn:g((()=>[(i(!0),m(b,null,d(null==e?void 0:e.children,(e=>(i(),m(s,{key:e._vid,element:e,config:t.config},null,8,["element","config"])))),128))]))})))]),1032,["element","config"])])};var k=p({name:"Preview",components:{SlotItem:P},setup(){var e;const p=JSON.parse(localStorage.getItem("jsonData"));p&&Object.keys(p.pages)||v.fail("当前没有可以预览的页面！");const c=O.currentRoute,i=y({currentPage:null==(e=p.pages[c.value.path])?void 0:e.blocks});i.currentPage||O.replace("/");const m=e=>{if(Array.isArray(e))return e.map((e=>m(e)));return s.componentMap[e.componentKey].render({size:{},props:e.props||{},block:e,model:{},custom:{}})};return f=((e,r)=>{for(var t in r||(r={}))o.call(r,t)&&l(e,t,r[t]);if(n)for(var t of n(r))a.call(r,t)&&l(e,t,r[t]);return e})({},j(i)),r(f,t({visualConfig:s,renderCom:m}));var f}});k.render=function(e,r,t,n,o,a){const l=c("slot-item");return i(!0),m(b,null,d(e.currentPage,(r=>(i(),m(l,{key:r._vid,element:r,config:e.visualConfig},null,8,["element","config"])))),128)};export default k;
