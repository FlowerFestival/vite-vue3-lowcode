var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,n=(e,n)=>{for(var r in n||(n={}))t.call(n,r)&&o(e,r,n[r]);if(a)for(var r of a(n))s.call(n,r)&&o(e,r,n[r]);return e};import{_ as r}from"./preload-helper.53a7bf77.js";import{r as c,c as i,i as p,u as l,a as g,w as u,d as f,o as j,b as h,p as b,e as m,f as d,g as P,t as D,h as y,j as v,k as w,l as O}from"./json.worker.e4ffb47a.js";import{v as S}from"./visual.config.2bfcd55d.js";const k="jsonData",$=Symbol("injectKey"),_=()=>p($);var E=f({expose:[],setup(e){const a=(()=>{var e;const a=JSON.parse(sessionStorage.getItem("jsonData"))||{container:{width:360,height:960},pages:{"/":{title:"首页",path:"/",blocks:[]}}},t=l();console.log("jsonData：",a);const s=e=>e.startsWith("/")?e:`/${e}`,o=g({jsonData:a,currentPage:null!=(e=a.pages[t.path])?e:a.pages["/"]});u((()=>t.path),(e=>p(e)));const r=(e="",a="")=>{delete o.jsonData.pages[e],a&&p(a)},p=(e="/")=>{o.currentPage=a.pages[e]};return{visualConfig:S,jsonData:c(o.jsonData),currentPage:i((()=>o.currentPage)),overrideProject:e=>{o.jsonData="string"==typeof e?JSON.parse(e):e},setCurrentPage:p,updatePage:({newPath:e,oldPath:a,page:t})=>{console.log(o.jsonData.pages[a],t),e&&e!=a?(t.path=e,o.jsonData.pages[s(e)]=n(n({},o.jsonData.pages[a]),t),r(a,s(e))):Object.assign(o.jsonData.pages[a],t)},incrementPage:(e="",a)=>{o.jsonData.pages[s(e)]=null!=a?a:{title:"新页面",path:e,blocks:[]}},deletePage:r,updatePageBlock:(e="",a=[])=>{o.jsonData.pages[e].blocks=a}}})();b($,a);const{jsonData:t}=a;return window.addEventListener("beforeunload",(()=>{sessionStorage.setItem("jsonData",JSON.stringify(t))})),(e,a)=>{const t=m("router-view");return j(),h(t,null,{default:d((({Component:e,route:a})=>[(j(),h(P(e),{key:a.path}))])),_:1})}}});D.configure({showSpinner:!1});const I=[{path:"/:pathMatch(.*)*",component:()=>r((()=>__import__("./index.173c5e75.js").then((function(e){return e.i}))),["/vite-vue3-lowcode/assets/index.173c5e75.js","/vite-vue3-lowcode/assets/index.b3959f1a.css","/vite-vue3-lowcode/assets/json.worker.e4ffb47a.js","/vite-vue3-lowcode/assets/visual.config.2bfcd55d.js","/vite-vue3-lowcode/assets/visual.config.947336ba.css"])}],x=y({history:v(),routes:I});x.beforeEach((()=>(D.start(),!0))),x.afterEach((()=>{D.done()}));const C={count:0};var J=w({state:()=>C,mutations:{increment(e){e.count++}},actions:{increment(e){e.commit("increment")}},getters:{double:e=>2*e.count}});const N=O(E);N.config.globalProperties.$$refs={},window.$$refs=N.config.globalProperties.$$refs,N.use(x).use(J),x.isReady().then((()=>N.mount("#app")));export{k as l,_ as u};
